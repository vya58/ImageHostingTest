# ImageHostingTest

Прототип хостинга изображений

# Тестовое задание

Разработать прототип хостинга изображений.

Инструменты для реализации задания:

- фреймворк Yii2 (обязательно)
- mysql

1. Реализовать форму для загрузки изображений.

При загрузке изображений должны соблюдаться следующие правила:

- в 1 запросе, в одной форме, можно загружать до 5 файлов
- название каждого файла должно транслителироваться на английский язык и приводиться к нижнему регистру
- название каждого файла должно быть уникальным, и, если файл с таким названием существует, нужно задавать новому файлу уникальное название
- все файлы должны отправляться в одну директорию
- записывать в БД инфу о загруженных файлах: название файла, дата и время загрузки

2. Реализовать страницу просмотра информации об изображениях.

На странице должны быть реализованы:

- вывод информации о загруженных файлах (название файла, дата и время загрузки)
- просмотр превью изображения
- возможность просмотра оригинального изображения
- сортировка по названию/дате и времени загрузки изображения

3. Реализовать простое API, результат возвращать в формате JSON

- запрос который выдает общее количество загруженных картинок {"total": 40}
- запрос с параметром указывающим запрошенную страницу в списке, возвращает список картинок по 10 штук на страницу {"page": 1, "list": [{"id": 10, "path": "image.jpg"}]}
- запрос c параметром id который вернет данные картинки по id {"id": 10, "path": "image.jpg"}

Код задания необходимо выложить на github/gitlab/bitbucket.
Бонусом будет возможность просмотра результата в общем доступе (например vds)

# Инструкция по развёртыванию

Использовался фреймворк Yii2 basic и OpenServer

1. Создайте папку проекта

2. Установите фреймворк Yii2. Например, через Composer:
   Откройте терминал с правами администратора, войдите в папку с проектом и запустите команду:
   composer create-project --prefer-dist yiisoft/yii2-app-basic <имя папки проекта>

3. Скопируйте файлы репозитория в папку с проектом

4. Настройте сервер. Например, в OpenServer во вкладке "Домены" установите Имя домена и папку домена (<имя папки проекта>/web)

5. Создайте БД

6. В терминале внутри папки с проектом запустите команду:
   composer update

7. В файле config/db.php настройте параметры соединения с Вашей БД

8. Запустите миграции командой:
   yii migrate

# Доступные маршруты

1. Страница просмотра информации об изображениях доступна по адресу:
   http://<имя домена>/

   По умолчанию сортировка выводится по id изображения, от меньшего к большему.

   - Вверху страницы, под хедером, кнопки сортировки изображений согласно ТЗ и кнопка сброса сортировки

   - При клике на превью изображения, открывается полное изображение в новой вкладке

2. Страница с формой для загрузки изображений доступна по адресу:
   http://<имя домена>/add

3. Запрос на выдачу общего количества загруженных картинок в формате JSON:
   http://<имя домена>/count

4. Запрос с параметром 'page', равным номеру запрошенной страницы в списке, возвращает список картинок по 10 штук на страницу в формате JSON:
   http://<имя домена>/image?page=4

5. Запрос c параметром id который вернет в формате JSON данные картинки по id:
   http://<имя домена>/image/{id}

6. Файлы изображений сохраняются в папке app/uploads/images

7. Файлы превью изображений сохраняются в папке app/uploads/preview
